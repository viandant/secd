     ### lllllllllllllll sss rrrrrrrrr  wwwwwwwww  aaaaaaaaaaa ttttttttt jjjjjjjjjj
0                                                              jump      boot
1        ld-ins                                                jump      ld
2        ldc-ins                                               jump      ldc
3        ldf-ins                                               jump      ldf
4        ap-ins                                                jump      ap
5        rtn-ins                                               jump      rtn
6        dum-ins                                               jump      dum
7        rap-ins                                               jump      rap
8        sel-ins                                               jump      sel
9        join-ins                                              jump      join
10       car-ins                                               jump      car
11       cdr-ins                                               jump      cdr
12       atom-ins                                              jump      atom
13       cons-ins                                              jump      cons
14       eq-ins                                                jump      eq
15       add-ins                                               jump      add
16       sub-ins                                               jump      sub
17       mul-ins                                               jump      mul
18       div-ins                                               jump      div
19       rem-ins                                               jump      rem
20       leq-ins                                               jump      leq
21       stop-ins                                              jump      stop
22       external-ins                                          jump      external
23       cmd23-ins                                             jump      stop
24       cmd24-ins                                             jump      stop
25       cmd25-ins                                             jump      stop
26       cmd26-ins                                             jump      stop
27       cmd27-ins                                             jump      stop
28       cmd28-ins                                             jump      stop
29       cmd29-ins                                             jump      stop
30       cmd30-ins                                             jump      stop
31       fork-ins                                              jump      fork
32       fail-ins                                              jump      fail
33       delay-ins                                             jump      stop
34       delay0-ins                                            jump      stop
35       force-ins                                             jump      stop
     
     -------------------------------------------------------------------------------------
36       boot            1                         halted      button?   start-program
37                                                             jump      boot
     -------------------------------------------------------------------------------------
38       error           2                                     button?   _3
39                                                             jump      error
40       _3                                                    button?   _3
41                                                             jump      boot
     -------------------------------------------------------------------------------------
42       start-program       num        mar        running
43                           mem        car                    
44                           car        mar                    
45                           mem        s                      
46                           nilx       e                      
47                           num        mar                    
48                           mem        car                    
49                           car        mar                    
50                           mem        car                    
51                           car        c                      
52                           nilx       d                      
53                           nilx       x1                     
54                           nilx       x2
55                           nilx       r
56                           num        mar                    
57                           mem        free                   
     -------------------------------------------------------------------------------------
58       top-of-cycle        c          mar                    
59                           mem        car                    
60                           car        mar                    
61                           mem        arg                    dispatch  
     -------------------------------------------------------------------------------------
62       ld                  e          x1                     
63                           c          mar                    
64                           mem        x2                     
65                           x2         mar                    
66                           mem        car                    
67                           car        mar                    
68                           mem        car                    
69                           car        mar                    
70                           mem        arg                    
71       _7                  arg                               nil?      _8
72                           x1         mar                    
73                           mem        x1                     
74                                      buf1       dec         
75                           buf1       arg                    jump      _7
76       _8                  x1         mar                    
77                           mem        car                    
78                           car        x1                     
79                           c          mar                    
80                           mem        x2                     
81                           x2         mar                    
82                           mem        car                    
83                           car        mar                    
84                           mem        x2                     
85                           x2         mar                    
86                           mem        arg                    
87       _9                  arg                               nil?      _10
88                           x1         mar                    
89                           mem        x1                     
90                                      buf1       dec         
91                           buf1       arg                    jump      _9
92       _10                 x1         mar                    
93                           mem        car                    
94                           car        x1                     
95                           s          x2                     call      consx1x2
96                           mar        s                      
97                           c          mar                    
98                           mem        c                      
99                           c          mar                    
100                          mem        c                      jump      top-of-cycle
     -------------------------------------------------------------------------------------
101      ldc                 s          x2                     
102                          c          mar                    
103                          mem        x1                     
104                          x1         mar                    
105                          mem        car                    
106                          car        x1                     call      consx1x2
107                          mar        s                      
108                          c          mar                    
109                          mem        c                      
110                          c          mar                    
111                          mem        c                      jump      top-of-cycle
     -------------------------------------------------------------------------------------
112      ldf                 e          x2                     
113                          c          mar                    
114                          mem        x1                     
115                          x1         mar                    
116                          mem        car                    
117                          car        x1                     call      consx1x2
118                          mar        x1                     
119                          s          x2                     call      consx1x2
120                          mar        s                      
121                          c          mar                    
122                          mem        c                      
123                          c          mar                    
124                          mem        c                      jump      top-of-cycle
     -------------------------------------------------------------------------------------
125      ap                  d          x2                     
126                          c          mar                    
127                          mem        x1                     call      consx1x2
128                          mar        x2                     
129                          e          x1                     call      consx1x2
130                          mar        x2                     
131                          s          mar                    
132                          mem        x1                     
133                          x1         mar                    
134                          mem        x1                     call      consx1x2
135                          mar        d
     
136                          s          mar                    
137                          mem        car                    
138                          car        mar                    
139                          mem        x2                     
140                          s          mar                    
141                          mem        x1                     
142                          x1         mar                    
143                          mem        car                    
144                          car        x1                     call      consx1x2
145                          mar        e
146                          
147                          s          mar                    
148                          mem        car                    
149                          car        mar                    
150                          mem        car                    
151                          car        c                      
     
152                          nilx       s                      jump      top-of-cycle
     -------------------------------------------------------------------------------------
153      rtn                 d          mar                    
154                          mem        car                    
155                          car        x2                     
156                          s          mar                    
157                          mem        car                    
158                          car        x1                     call      consx1x2
159                          mar        s                      
160                          d          mar                    
161                          mem        d                      
162                          d          mar                    
163                          mem        car                    
164                          car        e                      
165                          d          mar                    
166                          mem        d                      
167                          d          mar                    
168                          mem        car                    
169                          car        c                      
170                          d          mar                    
171                          mem        d                      jump      top-of-cycle
     -------------------------------------------------------------------------------------
172      dum                 e          x2                     
173                          nilx       x1                     call      consx1x2
174                          mar        e                      
175                          c          mar                    
176                          mem        c                      jump      top-of-cycle
     -------------------------------------------------------------------------------------
177      rap                 d          x2                     
178                          c          mar                    
179                          mem        x1                     call      consx1x2
180                          mar        x2                     
181                          e          mar                    
182                          mem        x1                     call      consx1x2
183                          mar        x2                     
184                          s          mar                    
185                          mem        x1                     
186                          x1         mar                    
187                          mem        x1                     call      consx1x2
188                          mar        d
     
     --- current environment saved, now replace dummy environment
189                          s          mar
190                          mem        car
191                          car        mar
192                          mem        e
     
193                          s          mar
194                          mem        y2
195                          y2         mar
196                          mem        car
197                          car        y2
198                          e          mar
199                          mem        arg
200                                     buf1       replcar
201                          buf1       bidir
     
202                          s          mar
203                          mem        car
204                          car        mar
205                          mem        car
206                          car        c
     
207                          nilx       s                      jump      top-of-cycle
     -------------------------------------------------------------------------------------
208      sel                 d          x2                     
209                          c          mar                    
210                          mem        x1                     
211                          x1         mar                    
212                          mem        x1                     
213                          x1         mar                    
214                          mem        x1                     call      consx1x2
215                          mar        d                      
216                          s          mar                    
217                          mem        car                    
218                          car        mar                    
219                          mem        arg                    
220                          true       mar                    
221                          mem                               eq?       _18
222                          c          mar                    
223                          mem        c                      
224                          c          mar                    
225                          mem        c                      
226                          c          mar                    
227                          mem        car                    
228                          car        c                      jump      _19
229      _18                 c          mar                    
230                          mem        c                      
231                          c          mar                    
232                          mem        car                    
233                          car        c                      
234      _19                 s          mar                    
235                          mem        s                      jump      top-of-cycle
     -------------------------------------------------------------------------------------
236      join                d          c                      
237                          c          mar                    
238                          mem        car                    
239                          car        c                      
240                          d          mar                    
241                          mem        d                      jump      top-of-cycle
     -------------------------------------------------------------------------------------
     --- s e (FORK c1 c2 . c) d r -> s e c1 (c.d) (s e c2 (c . d) . r)
242      serialfork          c          mar
243                          mem        mar
244                          mem        mar
245                          mem        x1
246                          d          x2                     call      consx1x2
247                          mar        d
248                          mar        x1
249                          r          x2                     call      consx1x2
250                          mar        x2
251                          c          mar
252                          mem        mar
253                          mem        mar
254                          mem        car
255                          car        x1                     call      consx1x2
256                          mar        x2
257                          e          x1                     call      consx1x2
258                          mar        x2
259                          s          x1                     call      consx1x2
260                          mar        r
261                          c          mar
262                          mem        mar
263                          mem        car
264                          car        c                      jump      top-of-cycle
     -------------------------------------------------------------------------------------
     --- s e (FORK c1 c2 . c) d r -> s e c1/c2 (c.d) r/nil
265      parallelfork        c          mar
266                          mem        mar
267                          mem        mar
268                          mem        x1
269                          d          x2                     call      consx1x2
270                          mar        d
271                          c          mar
272                          mem        mar                    machine1? select-c1
273                          mem        mar
274      select-c1           mem        car
275                          car        c                      machine1? top-of-cycle
276                          nilx       r                      jump      top-of-cycle
     -------------------------------------------------------------------------------------
277      fork                                      forkreq     button?   fork-continue
278                                                            jump      fork      
279      fork-continue                             running     forkack?  parallelfork
280                                                            jump      serialfork
     -------------------------------------------------------------------------------------
281      fail                r          mar
282                          mem        car                    nil?      finalfail
283                          car        s
284                          mem        mar
285                          mem        car
286                          car        e
287                          mem        mar
288                          mem        car
289                          car        c
290                          mem        mar
291                          mem        car
292                          car        d
293                          mem        r                      jump      top-of-cycle
294      finalfail                                 fail        stop
     -------------------------------------------------------------------------------------
295      car                 s          mar                    
296                          mem        x2                     
297                          s          mar                    
298                          mem        car                    
299                          car        mar                    
300                          mem        car                    
301                          car        x1                     call      consx1x2
302                          mar        s                      
303                          c          mar                    
304                          mem        c                      jump      top-of-cycle
     -------------------------------------------------------------------------------------
305      cdr                 s          mar                    
306                          mem        x2                     
307                          s          mar                    
308                          mem        car                    
309                          car        mar                    
310                          mem        x1                     call      consx1x2
311                          mar        s                      
312                          c          mar                    
313                          mem        c                      jump      top-of-cycle
     -------------------------------------------------------------------------------------
314      atom                s          mar                    
315                          mem        car                    
316                          car        mar                    
317                          mem                               atom?     _24
318                          false      x1                     jump      _25
319      _24                 true       x1                     
320      _25                 s          mar                    
321                          mem        x2                     call      consx1x2
322                          mar        s                      
323                          c          mar                    
324                          mem        c                      jump      top-of-cycle
     -------------------------------------------------------------------------------------
325      cons                s          mar                    
326                          mem        x2                     
327                          x2         mar                    
328                          mem        car                    
329                          car        x2                     
330                          s          mar                    
331                          mem        car                    
332                          car        x1                     call      consx1x2
333                          mar        x1                     
334                          s          mar                    
335                          mem        x2                     
336                          x2         mar                    
337                          mem        x2                     call      consx1x2
338                          mar        s                      
339                          c          mar                    
340                          mem        c                      jump      top-of-cycle
     -------------------------------------------------------------------------------------
341      eq                                                    call      setup-alu-args
342                          mem                               eq?       _28
343                          false      x1                     jump      _29
344      _28                 true       x1                     
345      _29                                                   call      push-alu-result
346                                                            jump      top-of-cycle
     -------------------------------------------------------------------------------------
347      add                                                   call      setup-alu-args
348                          mem        buf1       add         call      alu-gc
349                          mar        x1                     call      push-alu-result
350                                                            jump      top-of-cycle
     -------------------------------------------------------------------------------------
351      sub                                                   call      setup-alu-args
352                          mem        buf1       sub         call      alu-gc
353                          mar        x1                     call      push-alu-result
354                                                            jump      top-of-cycle
     -------------------------------------------------------------------------------------
355      mul                                                   call      setup-alu-args
356                          mem        buf1       mul         call      alu-gc
357                          mar        x1                     call      push-alu-result
358                                                            jump      top-of-cycle
     -------------------------------------------------------------------------------------
359      div                                                   call      setup-alu-args
360                          mem        buf1       div         call      alu-gc
361                          mar        x1                     call      push-alu-result
362                                                            jump      top-of-cycle
     -------------------------------------------------------------------------------------
363      rem                                                   call      setup-alu-args
364                          mem        buf1       rem         call      alu-gc
365                          mar        x1                     call      push-alu-result
366                                                            jump      top-of-cycle
     -------------------------------------------------------------------------------------
367      leq                                                   call      setup-alu-args
368                          mem                               leq?      _36
369                          false      x1                     jump      _37
370      _36                 true       x1                     
371      _37                                                   call      push-alu-result
372                                                            jump      top-of-cycle
     -------------------------------------------------------------------------------------
373      stop                s          mar                    
374                          mem        car                    
375                          car        s                      
376                          num        mar
377                          s          bidir                  stop
     -------------------------------------------------------------------------------------
378      external                                  external    button?   external-finish
379                                                            jump      external   
380      external-finish     c          mar        running
381                          mem        c                      jump      top-of-cycle
     -------------------------------------------------------------------------------------
382      setup-alu-args      s          mar                    
383                          mem        x1                     
384                          x1         mar                    
385                          mem        car                    
386                          car        mar                    
387                          mem        arg                    
388                          s          mar                    
389                          mem        car                    
390                          car        mar                    return    
     -------------------------------------------------------------------------------------
391      push-alu-result     s          mar                    
392                          mem        x2                     
393                          x2         mar                    
394                          mem        x2                     call      consx1x2
395                          mar        s                      
396                          c          mar                    
397                          mem        c                      return    
     -------------------------------------------------------------------------------------
398      consx1x2            free                              num?      cons-gc
399      _42                 free       mar                    
400                          mem        free                   
401                          cons       bidir                  return    
     -------------------------------------------------------------------------------------
402      cons-gc                                               call      gc
403                                                            jump      _42
     -------------------------------------------------------------------------------------
404      alu-gc              free                              num?      _46
405      _45                 free       mar                    
406                          mem        free                   
407                          buf1       bidir                  return    
408      _46                                                   call      gc
409                                                            jump      _45
     -------------------------------------------------------------------------------------
410      gc                  s          root       gc          call      mark-start
411                          e          root                   call      mark-start
412                          c          root                   call      mark-start
413                          d          root                   call      mark-start
414                          r          root                   call      mark-start
415                          x1         root                   call      mark-start
416                          x2         root                   call      mark-start
417                          nilx       root                   call      mark-start
418                          true       root                   call      mark-start
419                          false      root                   call      mark-start
420                          num        free
421                          num        arg                    
422                                     buf2       dec
423                          buf2       mar
424      _48                 arg                               nil?      _51
425                          mem        arg                    mark?     _49
426                          free       bidir                  
427                          mar        free                   jump      _50
428      _49                            buf2       clear-mark
429                          buf2       bidir
430      _50                 mar        arg                    
431                                     buf2       dec
432                          buf2       mar                    jump      _48
433      _51                 free                              num?      error
434                                                running     return    
     -------------------------------------------------------------------------------------
435      mark-start          nilx       parent                 
436      mark                root       mar                    
437                          mem        arg                    mark?     backup            
438                                     buf2       set-mark
439                          buf2       bidir                  atom?     backup
440                          parent     y1
441                          root       y2
442                                                gcmark      
443                          buf2       bidir                  jump      mark
     -------------------------------------------------------------------------------------
444      backup              parent     mar                    nil?      _56
445                          mem        arg                    field?    _55
     
     --- reset parents cdr, then backup
     
446                          root       y1
447                          parent     y2
448                                                gcreset
449                          buf2       bidir                  jump      backup
     
     --- reset parent's car, then reverse parents cdr
     
450      _55                 root       y2
451                                                gcreverse
452                          buf2       bidir                  jump      mark
453      _56                                                   return
